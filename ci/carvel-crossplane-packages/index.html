<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Site for examples related to service packages implementing service binding spec to be consumed by VMware Tanzu Application Platform"><link href=https://vmware-tanzu.github.io/tanzu-application-platform-reference-service-packages/ci/carvel-crossplane-packages/ rel=canonical><link href=../documentation/ rel=prev><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.4.2, mkdocs-material-9.0.11"><title>Carvel and Crossplane packages - Tanzu Application Platform Reference Service Packages</title><link rel=stylesheet href=../../assets/stylesheets/main.0d440cfe.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.2505c338.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Metropolis,Avenir+Next,Helvetica+Neue,Arial,sans-serif:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Metropolis,Avenir Next,Helvetica Neue,Arial,sans-serif";--md-code-font:"JetBrains Mono"}</style><link rel=stylesheet href=../../assets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary data-md-color-accent> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#list-packages class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-component=outdated hidden> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Tanzu Application Platform Reference Service Packages" class="md-header__button md-logo" aria-label="Tanzu Application Platform Reference Service Packages" data-md-component=logo> <img src=../../assets/vm-logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Tanzu Application Platform Reference Service Packages </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Carvel and Crossplane packages </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary data-md-color-accent aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/vmware-tanzu/tanzu-application-platform-reference-service-packages title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> vmware-tanzu/tanzu-application-platform-reference-service-packages </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> HOME </a> </li> <li class=md-tabs__item> <a href=../../usecases/aws/packages/elasticache/ack/ class=md-tabs__link> Use cases </a> </li> <li class=md-tabs__item> <a href=../../crossplane/ class=md-tabs__link> Crossplane </a> </li> <li class=md-tabs__item> <a href=../ class="md-tabs__link md-tabs__link--active"> CI </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Tanzu Application Platform Reference Service Packages" class="md-nav__button md-logo" aria-label="Tanzu Application Platform Reference Service Packages" data-md-component=logo> <img src=../../assets/vm-logo.png alt=logo> </a> Tanzu Application Platform Reference Service Packages </label> <div class=md-nav__source> <a href=https://github.com/vmware-tanzu/tanzu-application-platform-reference-service-packages title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> vmware-tanzu/tanzu-application-platform-reference-service-packages </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> HOME </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> Use cases <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Use cases </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_1> <label class=md-nav__link for=__nav_2_1 id=__nav_2_1_label tabindex=0> AWS <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> AWS </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_1_1> <label class=md-nav__link for=__nav_2_1_1 id=__nav_2_1_1_label tabindex=0> Packages <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_1_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1_1> <span class="md-nav__icon md-icon"></span> Packages </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_1_1_1> <label class=md-nav__link for=__nav_2_1_1_1 id=__nav_2_1_1_1_label tabindex=0> Elasticache with ACK <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_1_1_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1_1_1> <span class="md-nav__icon md-icon"></span> Elasticache with ACK </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../usecases/aws/packages/elasticache/ack/ class=md-nav__link> Consuming AWS Elasticache with ACK </a> </li> <li class=md-nav__item> <a href=../../usecases/aws/packages/elasticache/ack/manual/ class=md-nav__link> Creating AWS Elasticache Instances manually using kubectl (experimental) </a> </li> <li class=md-nav__item> <a href=../../usecases/aws/packages/elasticache/ack/package/ class=md-nav__link> Creating AWS Elasticache instances by using a Carvel package (experimental) </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_1_2> <label class=md-nav__link for=__nav_2_1_2 id=__nav_2_1_2_label tabindex=0> Prerequisites <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_1_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1_2> <span class="md-nav__icon md-icon"></span> Prerequisites </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../usecases/aws/prerequisites/ class=md-nav__link> AWS prerequisites </a> </li> <li class=md-nav__item> <a href=../../usecases/aws/prerequisites/eks/ class=md-nav__link> Create an EKS cluster with EBS CSI driver </a> </li> <li class=md-nav__item> <a href=../../usecases/aws/prerequisites/ack/ class=md-nav__link> Install the AWS Controllers for Kubernetes (ACK) </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> Azure <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Azure </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_1> <label class=md-nav__link for=__nav_2_2_1 id=__nav_2_2_1_label tabindex=0> Packages <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_1> <span class="md-nav__icon md-icon"></span> Packages </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_1_1> <label class=md-nav__link for=__nav_2_2_1_1 id=__nav_2_2_1_1_label tabindex=0> MongoDB with Crossplane <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_2_1_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_1_1> <span class="md-nav__icon md-icon"></span> MongoDB with Crossplane </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../usecases/azure/packages/mongodb/crossplane/ class=md-nav__link> Consume MongoDB via Crossplane </a> </li> <li class=md-nav__item> <a href=../../usecases/azure/packages/mongodb/crossplane/consume-instance/ class=md-nav__link> Via Crossplane Instances </a> </li> <li class=md-nav__item> <a href=../../usecases/azure/packages/mongodb/crossplane/consume-package/ class=md-nav__link> Via Crossplane Package </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_2> <label class=md-nav__link for=__nav_2_2_2 id=__nav_2_2_2_label tabindex=0> Prerequisites <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_2> <span class="md-nav__icon md-icon"></span> Prerequisites </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../usecases/azure/prerequisites/ class=md-nav__link> Azure Packages Prerequisites </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> Multicloud <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Multicloud </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_1> <label class=md-nav__link for=__nav_2_3_1 id=__nav_2_3_1_label tabindex=0> Packages <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_1> <span class="md-nav__icon md-icon"></span> Packages </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_1_1> <label class=md-nav__link for=__nav_2_3_1_1 id=__nav_2_3_1_1_label tabindex=0> Postgresql with Crossplane <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_1_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_1_1> <span class="md-nav__icon md-icon"></span> Postgresql with Crossplane </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../usecases/multicloud/packages/psql/ class=md-nav__link> Consuming Postgresql Multicloud </a> </li> <li class=md-nav__item> <a href=../../usecases/multicloud/packages/psql/create/ class=md-nav__link> Creating the Postgresql Multicloud Crossplane package </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> Crossplane <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Crossplane </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../crossplane/ class=md-nav__link> Install Crossplane </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex=0> Providers <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Providers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../crossplane/providers/aws/ class=md-nav__link> UXP AWS provider </a> </li> <li class=md-nav__item> <a href=../../crossplane/providers/azure/ class=md-nav__link> UXP Azure provider </a> </li> <li class=md-nav__item> <a href=../../crossplane/providers/terraform/ class=md-nav__link> UXP Terraform provider </a> </li> <li class=md-nav__item> <a href=../../crossplane/providers/helm/ class=md-nav__link> Helm provider </a> </li> <li class=md-nav__item> <a href=../../crossplane/providers/kubernetes/ class=md-nav__link> Kubernetes provider </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> CI <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> CI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> Continuous Integration </a> </li> <li class=md-nav__item> <a href=../documentation/ class=md-nav__link> Documentation </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Carvel and Crossplane packages <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Carvel and Crossplane packages </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#list-packages class=md-nav__link> List packages </a> </li> <li class=md-nav__item> <a href=#bump-version class=md-nav__link> Bump version </a> </li> <li class=md-nav__item> <a href=#publish-carvel-packages class=md-nav__link> Publish Carvel packages </a> </li> <li class=md-nav__item> <a href=#publish-carvel-repository class=md-nav__link> Publish Carvel repository </a> </li> <li class=md-nav__item> <a href=#test-carvel-packages class=md-nav__link> Test Carvel packages </a> </li> <li class=md-nav__item> <a href=#publish-crossplane-packages class=md-nav__link> Publish Crossplane packages </a> </li> <li class=md-nav__item> <a href=#test-crossplane-packages class=md-nav__link> Test Crossplane packages </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#list-packages class=md-nav__link> List packages </a> </li> <li class=md-nav__item> <a href=#bump-version class=md-nav__link> Bump version </a> </li> <li class=md-nav__item> <a href=#publish-carvel-packages class=md-nav__link> Publish Carvel packages </a> </li> <li class=md-nav__item> <a href=#publish-carvel-repository class=md-nav__link> Publish Carvel repository </a> </li> <li class=md-nav__item> <a href=#test-carvel-packages class=md-nav__link> Test Carvel packages </a> </li> <li class=md-nav__item> <a href=#publish-crossplane-packages class=md-nav__link> Publish Crossplane packages </a> </li> <li class=md-nav__item> <a href=#test-crossplane-packages class=md-nav__link> Test Crossplane packages </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>Carvel and Crossplane packages</h1> <p>We store the code and configuration for the reference packages in the <code>packages</code> folder, in a structure like the following:</p> <div class=highlight><pre><span></span><code>packages
├── &lt;PROVIDER&gt;
│   └── &lt;PACKAGING&gt;
│       └── &lt;NAME&gt;
│           ├── ...
│           ├── ...
┆           ┆
</code></pre></div> <ul> <li><code>PROVIDER</code>: the provider we build the package for (i.e., <code>aws</code>, <code>azure</code>, <code>gcp</code>, <code>multicloud</code>).</li> <li><code>PACKAGING</code>: the packaging system used (currently, it must be either <code>carvel</code> or <code>crossplane</code>).</li> <li><code>NAME</code>: the package name.</li> </ul> <p>The following diagram shows that multiple packages can be built and tested in parallel via the <code>publish-packages.yml</code> workflow.</p> <pre class=mermaid><code>graph LR
  A(List packages) --&gt; B(Bump version)
  B --&gt; C
  B --&gt; D

  subgraph Crossplane
    D(Publish Crossplane packages) --&gt; G(Test Crossplane packages)
  end

  subgraph Carvel
    C(Publish Carvel packages) --&gt; E(Publish Carvel repository)
    E --&gt; F(Test Carvel packages)
  end

  click A "#list-packages"
  click B "#bump-version"
  click C "#publish-carvel-packages"
  click E "#publish-carvel-repository"
  click F "#test-carvel-packages"
  click D "#publish-crossplane-packages"
  click G "#test-crossplane-packages"</code></pre> <p>This workflow runs upon a push event to either <code>main</code> or <code>develop</code> branches and pull request events targeting the <code>main</code> branch. Only the files matching the <code>packages/*/*/*/**</code> glob pattern trigger the workflow: this reflects the packages structure described before and prevents changes to files outside actual package directories from triggering it.</p> <h2 id=list-packages>List packages<a class=headerlink href=#list-packages title="Permanent link">&para;</a></h2> <p>This job evaluates the differences since the previous commit and builds two lists of packages, for Carvel and Crossplane, to feed the following GitHub Actions matrix jobs.</p> <h2 id=bump-version>Bump version<a class=headerlink href=#bump-version title="Permanent link">&para;</a></h2> <p>The repository is tagged with a new version, bumping the latest one by either the major, minor, or patch fields. The git comment determines which section of the version we increment. Depending on the occurrence of <code>#major,</code> <code>#minor</code>, <code>#patch</code> (default is <code>patch</code>). You can find more information <a href=https://github.com/anothrNick/github-tag-action/tree/1.57.0>here</a>.</p> <h2 id=publish-carvel-packages>Publish Carvel packages<a class=headerlink href=#publish-carvel-packages title="Permanent link">&para;</a></h2> <p>We build the changed Carvel packages in parallel and publish them to GitHub Packages using <a href=https://carvel.dev/kapp-controller/docs/v0.43.2/kctrl-package-authoring/ >Carvel's <code>kctrl</code></a> CLI. <code>kctrl</code> also produces package metadata files needed to build the Carvel repository. We store these metadata files in a separate (temporary) git branch for each package.</p> <h2 id=publish-carvel-repository>Publish Carvel repository<a class=headerlink href=#publish-carvel-repository title="Permanent link">&para;</a></h2> <p>We collect the packages' metadata files produced in the previous job into one branch. Finally, we use <code>kctrl</code> to author the pre-release Carvel repository and publish it to GitHub Packages in OCI format. The artifact produced by <code>kctrl</code> is a manifest file for the <code>PackageRepository</code> resource, useful for quickly deploying the repository on top of a kapp-enabled Kubernetes cluster. This file is attached to a pre-release; we use this file in the following job for testing the packages.</p> <div class="admonition note"> <p class=admonition-title>Carvel Repository</p> <p>Because we build this Carvel repository to test the packages, we create a pre-release. The final repository release is taken care of by a different workflow.</p> </div> <h2 id=test-carvel-packages>Test Carvel packages<a class=headerlink href=#test-carvel-packages title="Permanent link">&para;</a></h2> <p>This phase aims at testing the Carvel packages by spawning one (GitHub Workflow) job per package and running them in parallel on separate GitHub Actions runners. Each job performs the following steps:</p> <ol> <li><a href=https://carvel.dev/#install>install the Carvel suite</a></li> <li>create a <a href=https://kind.sigs.k8s.io/ >kind cluster</a></li> <li><a href=https://carvel.dev/kapp-controller/docs/v0.43.2/install/ >install kapp-controller</a></li> <li><a href=https://github.com/carvel-dev/secretgen-controller/blob/develop/docs/install.md>install secretgen-controller</a></li> <li>install the Carvel repository published in the previous job</li> <li> <p>run a test script that adheres to a specific naming convention (<code>scripts/carvel-e2e-$PACKAGE_PROVIDER-$PACKAGE_NAME.sh</code>), to:</p> <ol> <li>install the cloud operator specific to the current package (i.e., <a href=https://aws-controllers-k8s.github.io/community/docs/community/overview/ >ACK</a>, <a href=https://azure.github.io/azure-service-operator/ >ASO</a>, ...)</li> <li>deploy the package with sample input data (need to consider also firewall rules to allow network traffic)</li> <li>deploy an application to consume the service provided via the package</li> <li>ingest data into the application</li> <li>assert the ingested data</li> </ol> </li> <li> <p>clean up everything</p> </li> </ol> <h2 id=publish-crossplane-packages>Publish Crossplane packages<a class=headerlink href=#publish-crossplane-packages title="Permanent link">&para;</a></h2> <p>We build Crossplane packages leveraging <code>ytt</code>, for dealing with templating, and the <code>up</code> CLI from Upbound, for building the packages and pushing them to an OCI registry (GitHub Packages).</p> <h2 id=test-crossplane-packages>Test Crossplane packages<a class=headerlink href=#test-crossplane-packages title="Permanent link">&para;</a></h2> <p>The test phase is similar to Carvel's, which means:</p> <ol> <li>create a <a href=https://kind.sigs.k8s.io/ >kind cluster</a></li> <li>install <a href=https://github.com/upbound/universal-crossplane>Upbound's Universal Crossplane</a></li> <li> <p>run a test script that adheres to a specific naming convention (<code>scripts/crossplane-e2e-$PACKAGE_PROVIDER-$PACKAGE_NAME.sh</code>), to:</p> <ol> <li>install the Crossplane provider(s) needed by the package</li> <li>install the Crossplane package</li> <li>create a claim to trigger the build of the final managed resources</li> <li>deploy and test an application</li> </ol> </li> <li> <p>clean up everything</p> </li> </ol> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>Testing Crossplane packages in standard GitHub Actions runners might be tricky: In fact, standard runners have two vCPUs and 7 GB of RAM at the time of writing (specs <a href=https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners#supported-runners-and-hardware-resources>here</a>). This is on the low side for <a href=https://blog.upbound.io/scaling-kubernetes-to-thousands-of-crds/ >serving the number of APIs</a> that Crossplane and its providers can bring (especially the AWS one). Unfortunately, this leads to race conditions that might make the workflows either fail or succeed at unpredictable stages.</p> <p>However, it is possible to use the very same scripts provided and test the packages on a larger Kubernetes cluster or make use of <strong>paid</strong> <a href=https://docs.github.com/en/actions/using-github-hosted-runners/using-larger-runners>GitHub-hosted large runners</a>. Although standard Linux runners are free for public repositories, larger ones are not. However, you can look at the <a href=https://docs.github.com/en/billing/managing-billing-for-github-actions/about-billing-for-github-actions#per-minute-rates>per-minutes rates page</a>, to get an overview of the price of the various instances.</p> </div> <hr> <div class=md-source-file> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_datetime">2023-02-03 16:18:35</span> </small> </div> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2022 VMware </div> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.tabs", "navigation.instant", "navigation.tabs.sticky", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.db81ec45.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"method": "mike", "provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.6df46069.min.js></script> </body> </html>